<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>Annie's HCDE 439 Physical Computing Page!</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>Assignment 3: Input Output!</h1>
    <p>
        For this assignment, I built a light-sensing visualization using a photoresistor and two LEDs.
        The photoresistor is placed in a voltage divider so that changes in light create changes in
        voltage at analog pin A0. As the environment gets brighter or darker, both LEDs
        smoothly change brightness to represent the sensor reading.
    </p>

    <h2>Schematic and resistor calculations</h2>
    <img src="a3pic1.png" width="470" />
    <img src="a3pic2.png" width="470" />
    <p>
        The photoresistor and a fixed resistor form a voltage divider connected to A0.
        When light changes, the resistance of the photoresistor changes, which changes
        the voltage at A0.
  
        I measured the resistance of my photoresistor in bright light and in darkness
        using a multimeter. Using those values, I calculated the ideal fixed resistor
        using the geometric mean:  
    </p>

    <h2>Circuit on breadboard</h2>
    <img src="a3board.png" width="470" />
    <p>
        The photoresistor is connected to 5V and the fixed resistor connects to GND,
        with the junction going to A0. Two LEDs are connected to PWM pins 9 and 6,
        each in series with a 220Ω resistor and returning to GND. All components
        share the same ground rail connected to Arduino GND.
    </p>

    <h2>Arduino Code</h2>
    <pre><code>
        // store the analog pin used to read the voltage divider output
        int sensorPin = A0;
        
        // store the PWM pin for LED 1
        int led1Pin = 9;
        
        // store the PWM pin for LED 2
        int led2Pin = 6;
        
        // store the raw sensor reading (0–1023)
        int sensorValue = 0;
        
        // store the mapped brightness value (0–255)
        int brightness = 0;
        
        // store the threshold used for the if statement
        int threshold = 600;
        
        void setup() {
          // start serial communication at 9600 baud
          Serial.begin(9600);
        
          // set LED 1 pin as an output
          pinMode(led1Pin, OUTPUT);
        
          // set LED 2 pin as an output
          pinMode(led2Pin, OUTPUT);
        }
        
        void loop() {
          // read the voltage divider value from the photoresistor circuit
          sensorValue = analogRead(sensorPin);
        
          // map the 10-bit analogRead range (0–1023) to the 8-bit PWM range (0–255)
          brightness = map(sensorValue, 0, 1023, 0, 255);
        
          // clamp brightness to a valid PWM range (safety)
          brightness = constrain(brightness, 0, 255);
        
          // set LED 1 brightness using PWM
          analogWrite(led1Pin, brightness);
        
          // set LED 2 brightness using PWM
          analogWrite(led2Pin, brightness);
        
          // check if the sensor reading is above the threshold
          if (sensorValue > threshold) {
        
            // print a label for the sensor reading
            Serial.print("Light: ");
        
            // print the raw sensor value
            Serial.print(sensorValue);
        
            // print the status message for bright conditions
            Serial.println(" | Bright environment");
        
          } else {
        
            // print a label for the sensor reading
            Serial.print("Light: ");
        
            // print the raw sensor value
            Serial.print(sensorValue);
        
            // print the status message for dim conditions
            Serial.println(" | Dim environment");
          }
        
          // wait briefly so the serial output is readable
          delay(100);
        }
      
    </code></pre>

    <h2>Circuit Operation</h2>
    <img src="a3vid1.gif"  width="450"/>
    <p>
        This GIF shows the LEDs responding to the amount of light on the photoresistor.
        When I cover the sensor, both LEDs dim. When I shine a flashlight on the sensor,
        both LEDs brighten. The LEDs smoothly change brightness as the light level changes,
        acting as a real-time visualization of the sensor reading.
    </p>

    <h2>Additional Questions</h2>     
    <h3>1. In your voltage divider, can the variable resistor be either R1 or R2?</h3>
    <p>
        Yes, the photoresistor can be placed on either side of the voltage divider.
        The only difference is how the voltage changes when the light changes.
        If the photoresistor is connected to 5V, the voltage at A0 increases
        when there is more light.
        If the photoresistor is connected to GND, the voltage at A0 decreases
        when there is more light.
        In both cases the Arduino still reads a changing value, and the code
        can be adjusted to work either way.
    </p>

    <h3>2. Graph of voltage at A0 over time</h3>
    <img src="a3chart.jpg" width="470" />
    <p>
        As the light on the photoresistor changes, the voltage at A0 changes
        smoothly over time.
        When I cover the sensor with my hand, the voltage drops.
        When I shine a flashlight on it, the voltage rises.
        This change is gradual and matches how the LEDs slowly get dimmer
        or brighter in the video.
    </p>

    <h3>3. If analogWrite were 10-bit and analogRead were 16-bit</h3>
    <p>
        Right now, analogRead gives values from 0 to 1023,
        and analogWrite uses values from 0 to 255.
        If analogRead instead gave values from 0 to 65535,
        and analogWrite accepted values from 0 to 1023,
        the map function would change to:
        
        map(sensorValue, 0, 65535, 0, 1023);

        The idea stays the same. We are just converting the sensor range
        to the LED brightness range.
    </p>

    <h3>4. AI Tool Usage</h3>
    <p>
        I used AI tools to better understand how voltage dividers work
        and to double check my resistor calculations and code logic
        while building this circuit.
    </p>

    <p>
      <a href="index.html">Click to return to Homepage</a>
    </p>

  </body>
</html>
